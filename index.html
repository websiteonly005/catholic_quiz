<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>哥林多前书第五章 - 圣经问答</title>
    
    <!-- 引入 Tailwind CSS (用于样式) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 引入 React 和 ReactDOM (用于逻辑) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- 引入 Babel (用于在浏览器中解析 JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* 自定义动画 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
        .animate-slide-up { animation: slideUp 0.3s ease-out forwards; }
        
        body { font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif; }
    </style>
</head>
<body class="bg-gray-100 text-gray-900 min-h-screen">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- 图标组件 (SVG) ---
        const IconBase = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const BookOpen = (props) => <IconBase {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></IconBase>;
        const CheckCircle = (props) => <IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconBase>;
        const XCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></IconBase>;
        const Trophy = (props) => <IconBase {...props}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></IconBase>;
        const Clock = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></IconBase>;
        const ArrowRight = (props) => <IconBase {...props}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></IconBase>;
        const RefreshCcw = (props) => <IconBase {...props}><polyline points="1 4 1 10 7 10"/><polyline points="23 20 23 14 17 14"/><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/></IconBase>;
        const Star = (props) => <IconBase {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></IconBase>;
        const Shield = (props) => <IconBase {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></IconBase>;
        const Zap = (props) => <IconBase {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></IconBase>;

        const QuizApp = () => {
          // --- 状态管理 ---
          const [gameState, setGameState] = useState('menu'); // 'menu', 'playing', 'results'
          const [difficulty, setDifficulty] = useState('easy'); // 'easy', 'medium', 'hard'
          const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
          const [score, setScore] = useState(0);
          const [showFeedback, setShowFeedback] = useState(false);
          const [isCorrect, setIsCorrect] = useState(false);
          const [selectedOption, setSelectedOption] = useState(null);
          const [timeLeft, setTimeLeft] = useState(null);
          const [timerActive, setTimerActive] = useState(false);

          // --- 题目数据 (基于哥林多前书第五章) ---
          const questions = [
            {
              id: 1,
              question: "在第五章开头，保罗提到哥林多教会中发生了什么严重的淫乱行为？",
              options: [
                "有人娶了自己的继母（收了他父亲的妻子）",
                "有人崇拜偶像",
                "有人在聚会中醉酒",
                "有人偷窃教会的财物"
              ],
              correctAnswer: 0,
              explanation: "经文 5:1：'风闻在你们中间有淫乱的事……甚至有人收了他的继母。'"
            },
            {
              id: 2,
              question: "面对这种罪行，哥林多教会当时的态度是什么？",
              options: [
                "极其悲伤并痛悔",
                "立即将那人赶出去",
                "自高自大，并不哀痛",
                "写信给保罗求助"
              ],
              correctAnswer: 2,
              explanation: "经文 5:2：'你们还是自高自大，并不哀痛，把行这事的人从你们中间赶出去。'"
            },
            {
              id: 3,
              question: "保罗判定要将行这事的人“交给撒但”，目的是什么？",
              options: [
                "让他永远灭亡",
                "败坏他的肉体，使他的灵魂在主耶稣的日子可以得救",
                "让他去别处传福音",
                "向外邦人展示教会的严厉"
              ],
              correctAnswer: 1,
              explanation: "经文 5:5：'要把这样的人交给撒但，败坏他的肉体，使他的灵魂在主耶稣的日子可以得救。'"
            },
            {
              id: 4,
              question: "保罗用什么比喻来形容罪在教会中的扩散？",
              options: [
                "一点面酵能使全团都发起来",
                "一颗坏种子能毁掉整片田地",
                "一滴墨水能染黑整杯水",
                "一个破口能使船沉没"
              ],
              correctAnswer: 0,
              explanation: "经文 5:6：'岂不知一点面酵能使全团都发起来吗？'"
            },
            {
              id: 5,
              question: "保罗称基督为我们的什么？",
              options: [
                "赎罪祭",
                "逾越节的羔羊",
                "大祭司",
                "好牧人"
              ],
              correctAnswer: 1,
              explanation: "经文 5:7：'因为我们逾越节的羔羊基督，已经被杀献祭了。'"
            },
            {
              id: 6,
              question: "保罗教导我们要用什么来守这节（过基督徒的生活）？",
              options: [
                "禁食和祷告",
                "旧酵和恶毒的饼",
                "诚实真正的无酵饼",
                "十一奉献和善行"
              ],
              correctAnswer: 2,
              explanation: "经文 5:8：'只用诚实真正的无酵饼。'"
            },
            {
              id: 7,
              question: "保罗说“不可与淫乱的人相交”，这话是指？",
              options: [
                "世上一切淫乱的人",
                "所有非基督徒",
                "教会内称为弟兄却行淫乱的人",
                "罗马的公民"
              ],
              correctAnswer: 2,
              explanation: "经文 5:9-11 保罗解释不是指世上的人（否则就得离开世界），而是指称为弟兄却行恶的人。"
            },
            {
              id: 8,
              question: "对于那些称为弟兄却行勒索、拜偶像或辱骂的人，保罗说应当如何对待？",
              options: [
                "劝勉三次",
                "为他祷告但不惩罚",
                "不可与他相交，就是与他吃饭都不可",
                "要求他缴纳罚款"
              ],
              correctAnswer: 2,
              explanation: "经文 5:11：'……这样的人不可与他相交，就是与他吃饭都不可。'"
            },
            {
              id: 9,
              question: "保罗说审判“外人”（非信徒）的是谁？",
              options: [
                "教会的长老",
                "保罗自己",
                "神",
                "罗马政府"
              ],
              correctAnswer: 2,
              explanation: "经文 5:13：'至于外人有神审判他们。'"
            },
            {
              id: 10,
              question: "本章最后一句的命令是什么？",
              options: [
                "要爱你的邻舍",
                "你们应当把那恶人从你们中间赶出去",
                "凡事包容，凡事相信",
                "彼此亲嘴问安"
              ],
              correctAnswer: 1,
              explanation: "经文 5:13：'你们应当把那恶人从你们中间赶出去。'"
            }
          ];

          // --- 计时器逻辑 ---
          useEffect(() => {
            let interval = null;
            if (timerActive && timeLeft > 0 && !showFeedback) {
              interval = setInterval(() => {
                setTimeLeft((prev) => prev - 1);
              }, 1000);
            } else if (timeLeft === 0 && timerActive && !showFeedback) {
              handleTimeOut();
            }
            return () => clearInterval(interval);
          }, [timerActive, timeLeft, showFeedback]);

          const handleTimeOut = () => {
            setTimerActive(false);
            setIsCorrect(false);
            setShowFeedback(true);
            setSelectedOption(-1); // -1 表示超时
          };

          // --- 游戏控制函数 ---
          const startGame = (selectedDiff) => {
            setDifficulty(selectedDiff);
            setGameState('playing');
            setCurrentQuestionIndex(0);
            setScore(0);
            resetQuestionState(selectedDiff);
          };

          const resetQuestionState = (diff) => {
            setShowFeedback(false);
            setSelectedOption(null);
            setIsCorrect(false);
            
            // 设置时间限制
            if (diff === 'easy') {
              setTimeLeft(null); // 无限制
              setTimerActive(false);
            } else if (diff === 'medium') {
              setTimeLeft(20);
              setTimerActive(true);
            } else if (diff === 'hard') {
              setTimeLeft(10);
              setTimerActive(true);
            }
          };

          const handleAnswerClick = (optionIndex) => {
            if (showFeedback) return; // 防止重复点击

            setTimerActive(false);
            setSelectedOption(optionIndex);
            const correct = optionIndex === questions[currentQuestionIndex].correctAnswer;
            setIsCorrect(correct);
            setShowFeedback(true);

            if (correct) {
              // 计算分数：基础分 + 难度加成
              let points = 10;
              if (difficulty === 'medium') points = 15;
              if (difficulty === 'hard') points = 20;
              setScore((prev) => prev + points);
            }
          };

          const handleNextQuestion = () => {
            if (currentQuestionIndex < questions.length - 1) {
              setCurrentQuestionIndex((prev) => prev + 1);
              resetQuestionState(difficulty);
            } else {
              setGameState('results');
            }
          };

          const restartGame = () => {
            setGameState('menu');
          };

          // --- 界面组件 ---

          const MenuScreen = () => (
            <div className="flex flex-col items-center justify-center min-h-screen p-6 text-center space-y-8 animate-fade-in">
              <div className="space-y-4">
                <div className="flex justify-center">
                  <BookOpen size={64} className="text-blue-600" />
                </div>
                <h1 className="text-4xl font-bold text-gray-800 tracking-tight">哥林多前书 第5章</h1>
                <p className="text-xl text-gray-600">圣经知识测验</p>
              </div>

              <div className="w-full max-w-md bg-white p-8 rounded-2xl shadow-xl border border-gray-100">
                <h2 className="text-lg font-semibold text-gray-700 mb-6">请选择挑战难度</h2>
                <div className="space-y-4">
                  <button 
                    onClick={() => startGame('easy')}
                    className="w-full flex items-center justify-between p-4 bg-green-50 hover:bg-green-100 text-green-700 rounded-xl transition-all border border-green-200 hover:scale-105"
                  >
                    <div className="flex items-center gap-3">
                      <Star className="fill-current" size={20} />
                      <span className="font-bold">简单</span>
                    </div>
                    <span className="text-sm opacity-75">无时间限制</span>
                  </button>

                  <button 
                    onClick={() => startGame('medium')}
                    className="w-full flex items-center justify-between p-4 bg-yellow-50 hover:bg-yellow-100 text-yellow-700 rounded-xl transition-all border border-yellow-200 hover:scale-105"
                  >
                    <div className="flex items-center gap-3">
                      <Shield className="fill-current" size={20} />
                      <span className="font-bold">中等</span>
                    </div>
                    <span className="text-sm opacity-75">20秒/题</span>
                  </button>

                  <button 
                    onClick={() => startGame('hard')}
                    className="w-full flex items-center justify-between p-4 bg-red-50 hover:bg-red-100 text-red-700 rounded-xl transition-all border border-red-200 hover:scale-105"
                  >
                    <div className="flex items-center gap-3">
                      <Zap className="fill-current" size={20} />
                      <span className="font-bold">困难</span>
                    </div>
                    <span className="text-sm opacity-75">10秒/题</span>
                  </button>
                </div>
              </div>
            </div>
          );

          const QuizScreen = () => {
            const currentQ = questions[currentQuestionIndex];
            
            // 进度条计算
            const progress = ((currentQuestionIndex) / questions.length) * 100;

            return (
              <div className="flex flex-col min-h-screen bg-gray-50 max-w-2xl mx-auto md:shadow-2xl overflow-hidden md:my-8 md:rounded-3xl">
                {/* 顶部栏 */}
                <div className="bg-white p-4 flex justify-between items-center shadow-sm z-10">
                  <div className="flex items-center gap-2">
                    <span className="text-sm font-bold text-gray-500">第 {currentQuestionIndex + 1}/{questions.length} 题</span>
                  </div>
                  <div className="flex items-center gap-4">
                    {timeLeft !== null && (
                       <div className={`flex items-center gap-1 font-mono font-bold text-lg ${timeLeft <= 5 ? 'text-red-600 animate-pulse' : 'text-blue-600'}`}>
                         <Clock size={18} />
                         {timeLeft}s
                       </div>
                    )}
                    <div className="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-bold">
                      得分: {score}
                    </div>
                  </div>
                </div>

                {/* 进度条 */}
                <div className="w-full bg-gray-200 h-2">
                  <div 
                    className="bg-blue-600 h-2 transition-all duration-500 ease-out" 
                    style={{ width: `${progress}%` }}
                  ></div>
                </div>

                {/* 题目区域 */}
                <div className="flex-1 p-6 md:p-10 flex flex-col">
                  <h2 className="text-xl md:text-2xl font-bold text-gray-800 mb-8 leading-relaxed">
                    {currentQ.question}
                  </h2>

                  <div className="space-y-4 flex-1">
                    {currentQ.options.map((option, idx) => {
                      // 决定按钮样式
                      let btnClass = "w-full text-left p-4 rounded-xl border-2 transition-all duration-200 text-lg font-medium ";
                      
                      if (showFeedback) {
                        if (idx === currentQ.correctAnswer) {
                          btnClass += "bg-green-100 border-green-500 text-green-800"; // 正确答案总是绿色
                        } else if (idx === selectedOption) {
                          btnClass += "bg-red-100 border-red-500 text-red-800"; // 选错的显示红色
                        } else {
                          btnClass += "bg-gray-50 border-gray-100 text-gray-400"; // 其他变灰
                        }
                      } else {
                        btnClass += "bg-white border-gray-200 hover:border-blue-400 hover:bg-blue-50 text-gray-700 hover:shadow-md active:scale-[0.99]";
                      }

                      return (
                        <button
                          key={idx}
                          onClick={() => handleAnswerClick(idx)}
                          disabled={showFeedback}
                          className={btnClass}
                        >
                          <div className="flex items-start gap-3">
                            <span className="opacity-60 font-mono text-sm mt-1">{String.fromCharCode(65 + idx)}.</span>
                            {option}
                          </div>
                        </button>
                      );
                    })}
                  </div>
                </div>

                {/* 反馈区域 - 固定在底部 */}
                {showFeedback && (
                  <div className={`p-6 animate-slide-up shadow-[0_-4px_20px_rgba(0,0,0,0.1)] ${isCorrect ? 'bg-green-50 border-t-2 border-green-500' : 'bg-red-50 border-t-2 border-red-500'}`}>
                    <div className="flex items-start gap-4 mb-4">
                      <div className="mt-1">
                        {isCorrect ? <CheckCircle size={32} className="text-green-600" /> : <XCircle size={32} className="text-red-600" />}
                      </div>
                      <div>
                        <h3 className={`font-bold text-lg ${isCorrect ? 'text-green-800' : 'text-red-800'}`}>
                          {isCorrect ? '回答正确！' : (selectedOption === -1 ? '时间到！' : '回答错误')}
                        </h3>
                        <p className="text-gray-700 mt-1 text-sm md:text-base leading-relaxed">
                          <span className="font-semibold">解析：</span>{currentQ.explanation}
                        </p>
                      </div>
                    </div>
                    <button 
                      onClick={handleNextQuestion}
                      className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl flex items-center justify-center gap-2 transition-colors shadow-lg shadow-blue-200"
                    >
                      {currentQuestionIndex === questions.length - 1 ? '查看结果' : '下一题'}
                      <ArrowRight size={20} />
                    </button>
                  </div>
                )}
              </div>
            );
          };

          const ResultScreen = () => {
            // 计算评级
            const maxScore = difficulty === 'medium' ? 150 : (difficulty === 'hard' ? 200 : 100);
            const percentage = (score / maxScore) * 100;
            
            let message = "";
            if (percentage === 100) message = "完美！你对这章圣经非常熟悉！";
            else if (percentage >= 80) message = "非常棒！继续保持！";
            else if (percentage >= 60) message = "不错，但还有进步空间！";
            else message = "建议再重读一遍哥林多前书第五章哦。";

            return (
              <div className="flex flex-col items-center justify-center min-h-screen p-6 bg-gray-50 animate-fade-in">
                <div className="bg-white p-8 md:p-12 rounded-3xl shadow-2xl text-center max-w-md w-full">
                  <div className="inline-flex p-4 bg-yellow-100 rounded-full text-yellow-600 mb-6">
                    <Trophy size={48} />
                  </div>
                  
                  <h2 className="text-3xl font-bold text-gray-800 mb-2">测试完成</h2>
                  <p className="text-gray-500 mb-8">{message}</p>
                  
                  <div className="bg-blue-50 p-6 rounded-2xl mb-8">
                    <div className="text-sm text-blue-600 uppercase font-bold tracking-wider mb-1">最终得分</div>
                    <div className="text-5xl font-black text-blue-700">{score}</div>
                    <div className="text-xs text-blue-400 mt-2">难度: {difficulty === 'easy' ? '简单' : (difficulty === 'medium' ? '中等' : '困难')}</div>
                  </div>

                  <button 
                    onClick={restartGame}
                    className="w-full bg-gray-900 hover:bg-gray-800 text-white font-bold py-4 rounded-xl flex items-center justify-center gap-2 transition-transform hover:scale-105"
                  >
                    <RefreshCcw size={20} />
                    再试一次
                  </button>
                </div>
              </div>
            );
          };

          // 主应用组件渲染逻辑
          return (
            <div className="font-sans text-gray-900">
              {gameState === 'menu' && <MenuScreen />}
              {gameState === 'playing' && <QuizScreen />}
              {gameState === 'results' && <ResultScreen />}
            </div>
          );
        };

        // 挂载应用
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<QuizApp />);
    </script>
</body>
</html>
